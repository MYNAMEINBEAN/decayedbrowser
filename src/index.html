<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>Grim</title>
    <link rel="stylesheet" href="index.css" />
  <!-- Removed unused 1.js and 2.js scripts -->
    <!-- Lucide Icons CDN -->
    <link rel="stylesheet" href="https://unpkg.com/lucide-static@latest/font/lucide.css" />
  </head>
  <body>
    <script>
      function TopBarOpen() {}
      function TopBarClose() {}
      function leftBarOpenTab() {}
      function LeftBarClose() {}
    </script>
    <div id="body-box">
      <div class="app-shell">
        <!-- Left vertical sidebar (Arc+Comet hybrid) -->
        <aside id="sidebar" onmouseenter="leftBarOpenTab()" onmouseleave="LeftBarClose()">
          <div id="sidebar-top">
            <button class="icon-btn" id="btn-add-tab" onclick="AddTabs()"><img src="img/addtab.png" alt="add"></button>
          </div>
          <nav id="tabs">
                <!-- Single tab with Lucide globe SVG icon -->
                <div class="tab" id="tab-globe" title="Globe">
                  <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="#a48be0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-globe">
                    <circle cx="12" cy="12" r="10" />
                    <line x1="2" x2="22" y1="12" y2="12" />
                    <path d="M12 2a15.3 15.3 0 0 1 0 20M12 2a15.3 15.3 0 0 0 0 20" />
                  </svg>
                </div>
          </nav>
          <div id="sidebar-bottom">
            <button class="icon-btn" onclick="confirm('bookmark')"><img src="img/pagebook.png" alt="bookmark"></button>
          </div>
        </aside>

        <!-- Main content area -->
        <main id="main-area">
          <header id="topbar" onmouseenter="TopBarOpen()" onmouseleave="TopBarClose()">
            <div id="topbar-inner">
              <div id="nav-left">
                <button class="icon-btn" onclick="BackWeb()"><img src="img/pageback.png" alt="back"></button>
                <button class="icon-btn" onclick="ReloadWeb()"><img src="img/pagerelode.png" alt="reload"></button>
                <button class="icon-btn" onclick="NextWeb()"><img src="img/pagenext.png" alt="next"></button>
              </div>

              <div id="nav-center">
                <!-- Compact topbar prompt uses the same visual language as the center prompt -->
                <div class="prompt-panel topbar" id="top-pill">

                  <input class="prompt-input" id="url-bar" type="text" placeholder="Search or enter address" />
                      <script>
                        // Load result via Scramjet in webview
                        document.addEventListener('DOMContentLoaded', function() {
                          const urlBar = document.getElementById('url-bar');
                          const webview = document.getElementById('ws-2');
                          urlBar.addEventListener('keydown', function(e) {
                            if (e.key === 'Enter') {
                              let input = urlBar.value.trim();
                              let targetUrl = '';
                              if (input.startsWith('http://') || input.startsWith('https://')) {
                                targetUrl = input;
                              } else {
                                // Treat as DuckDuckGo search
                                targetUrl = `https://start.duckduckgo.com/?q=${encodeURIComponent(input)}`;
                              }
                                let proxyUrl = `https://scramjet.decayedon.top/scramjet/${encodeURIComponent(targetUrl)}`;
                              if (webview) {
                                webview.src = proxyUrl;
                                webview.style.display = 'block';
                                webview.style.width = '100%';
                              }
                            }
                          });
                        });
                      </script>

                </div>
              </div>

              <div id="nav-right">
                <div id="win-tray">
                

                </div>
              </div>
            </div>
          </header>

          <section id="screen">
            <section class="window" id="scr-1">
              <!-- Centered home prompt (matches attached image) -->
              <div class="center-prompt" id="home-prompt">
                <div class="prompt-panel">


                  <input class="prompt-input" id="home-search" placeholder="Ask anything. Type @ for mentions and / for shortcuts." />

                </div>
              </div>
            </section>

            <section class="window" id="scr-2" style="display:none; width:0%"><webview id="ws-2" src="components/homegrimapppage.html" allowpopups></webview></section>
          </section>
        </main>
      </div>
    </div>
    <!-- Wisp Client JS -->
    <!-- Scramjet Browser Logic -->
    <script>
// Scramjet browser logic from scramjet.all.js
(function(){
})();
    </script>
  </body>
      <script>
        // Fix missing TopBarOpen/TopBarClose functions
        function TopBarOpen() {}
        function TopBarClose() {}
      </script>
</html>
