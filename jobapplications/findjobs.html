<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>DecayedBrowser</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="jobs.css">
  
  <link rel="icon" type="image/png" href="/grim.png">
  <style>
   
  </style>
</head>
<body>
  <div id="particles-js"></div>
  <canvas id="bg"></canvas>
    <main class="hero">
      <div class="browser-shell">
        <div class="browser-toolbar">
          <div class="shortcut-group" id="shortcut-group">
            <button id="btn-back" class="toolbar-shortcut" title="Back"><i data-lucide="arrow-left"></i></button>
            <button id="btn-forward" class="toolbar-shortcut" title="Forward"><i data-lucide="arrow-right"></i></button>
            <button id="btn-refresh" class="toolbar-shortcut" title="Refresh"><i data-lucide="refresh-cw"></i></button>
            <button id="btn-settings" class="toolbar-shortcut" title="Settings"><i data-lucide="settings"></i></button>
            <button id="btn-scram" class="toolbar-shortcut" title="Enable Scram"><i data-lucide="zap"></i></button>
            <button id="btn-incognito" class="toolbar-shortcut" title="Open incognito"><i data-lucide="eye-off"></i></button>
          </div>
          <input id="addr" class="addr-input" type="text" placeholder="https://discord.gg/WV8cWxYTtQ" />
            </div>

        <div class="browser-view">
          <div class="browser-topbar"> <span id="address-top">https://discord.gg/WV8cWxYTtQ</span> </div>
          <iframe id="browser-iframe" class="browser-iframe" src="about:blank" sandbox="allow-scripts allow-same-origin allow-forms"></iframe>
          <pre id="console" class="browser-console"></pre>
        </div>

       
      
      <script>
        (function(){
          const iframe = document.getElementById('browser-iframe');
          const addr = document.getElementById('addr');
          const goBtn = document.getElementById('goBtn');
          const consoleEl = document.getElementById('console');
          const addressTop = document.getElementById('address-top');

          let historyStack = [];
          let idx = -1;

          function write(msg){ consoleEl.textContent = msg; }

          function navigate(url, push=true){
            if (!/^https?:\/\//i.test(url)) url = 'https://' + url;
            try{
              if (window.__useScramNavigate) {
                window.__useScramNavigate(url, iframe, addressTop);
              } else {
                iframe.src = url;
                addressTop.textContent = url;
              }
            } catch(e){ write('Navigation error: '+e.message); }
            if (push){
              historyStack = historyStack.slice(0, idx+1);
              historyStack.push(url);
              idx = historyStack.length - 1;
            }
          }

          goBtn && goBtn.addEventListener('click', ()=>{ navigate(addr.value || 'about:blank'); });
          addr.addEventListener('keydown', e=>{ if (e.key === 'Enter') { navigate(addr.value || 'about:blank'); } });

          const tbBack = document.getElementById('btn-back');
          const tbForward = document.getElementById('btn-forward');
          const tbRefresh = document.getElementById('btn-refresh');
          const tbSettings = document.getElementById('btn-settings');
          const tbIncognito = document.getElementById('btn-incognito');
          if (tbBack) tbBack.addEventListener('click', ()=>{ const el = document.getElementById('back'); if (el) el.click(); else write('No back control'); });
          if (tbForward) tbForward.addEventListener('click', ()=>{ const el = document.getElementById('forward'); if (el) el.click(); else write('No forward control'); });
          if (tbRefresh) tbRefresh.addEventListener('click', ()=>{ const el = document.getElementById('refresh'); if (el) el.click(); else { write('Refreshing...'); const cur = iframe.src || historyStack[idx] || ''; iframe.src = cur; setTimeout(()=> write('Refreshed.'), 600); } });
          if (tbSettings) tbSettings.addEventListener('click', ()=>{ alert('Settings placeholder'); });
          if (tbIncognito) tbIncognito.addEventListener('click', ()=>{ navigate('about:blank'); });

          const tbScram = document.getElementById('btn-scram');
          if (tbScram) tbScram.addEventListener('click', async ()=>{
            if (window.initScramjet) {
              write('Initializing Scramjet...');
              try{ await window.initScramjet(); write('Scramjet initialized'); }catch(e){ write('Scramjet init failed: '+(e&&e.message?e.message:e)); }
            } else {
              write('Scram init not available');
            }
          });

          const refreshBtn = document.getElementById('refresh');
          if (refreshBtn) {
            refreshBtn.addEventListener('click', ()=>{
              write('Refreshing...');
              const cur = iframe.src || historyStack[idx] || '';
              iframe.src = cur;
              setTimeout(()=> write('Refreshed.'), 600);
            });
          }

          const backBtn = document.getElementById('back');
          if (backBtn) {
            backBtn.addEventListener('click', ()=>{
              if (idx > 0){ idx--; navigate(historyStack[idx], false); write('Back to '+historyStack[idx]); }
              else write('No back history');
            });
          }

          const forwardBtn = document.getElementById('forward');
          if (forwardBtn) {
            forwardBtn.addEventListener('click', ()=>{
              if (idx < historyStack.length-1){ idx++; navigate(historyStack[idx], false); write('Forward to '+historyStack[idx]); }
              else write('No forward history');
            });
          }

          const fsBtn = document.getElementById('fs');
          if (fsBtn) {
            fsBtn.addEventListener('click', ()=>{
              const shell = document.querySelector('.browser-shell');
              if (document.fullscreenElement) document.exitFullscreen();
              else shell.requestFullscreen();
            });
          }

          // sample initial page
          navigate('https://duckduckgo.com/?q=hi');
        })();
      </script>

      </main>

  <nav class="bottom-dock" aria-label="dock">
    <div class="dock-inner">
      <button class="dock-btn" title="Home">
        <img class="dock-logo" src="/grim.png" alt="logo">
      </button>
      <button class="dock-btn" title="Home">
        <i data-lucide="home"></i>
      </button>
      <button class="dock-btn" title="Games">
        <i data-lucide="gamepad"></i>
      </button>
      <button class="dock-btn" title="Reading">
        <i data-lucide="book-open"></i>
      </button>
      <button class="dock-btn" title="Chat">
        <i data-lucide="message-circle"></i>
      </button>
      <button class="dock-btn" title="Settings">
        <i data-lucide="settings"></i>
      </button>
    </div>
  </nav>
  
  <script src="stars.js"></script>
  <script src="https://unpkg.com/lucide@latest"></script>
  <script>window.lucide && lucide.createIcons();</script>
  <!-- Scramjet: load runtime and lightweight init (keeps HTML tidy) -->
  <script src="/scram/scramjet.all.js"></script>
  <script src="scram-init.js"></script>
    
</body>
</html>
